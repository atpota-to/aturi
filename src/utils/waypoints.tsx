import { ReactNode } from 'react';
import { MoonStar, Wrench, CalendarFold, Rainbow } from 'lucide-react';

export type WaypointType = 'post' | 'profile' | 'list' | 'record' | 'unknown';

export type Waypoint = {
  id: string;
  name: string;
  description: string;
  icon: ReactNode;
  getUrl: (handle: string, collection?: string, rkey?: string, did?: string) => string | null;
  supportedTypes: WaypointType[];
  category: string;
};

export type WaypointCategory = {
  id: string;
  name: string;
  description?: string;
  defaultWaypointId: string;
  subcategories?: WaypointCategory[];
};

export type CategorizedWaypoints = {
  category: WaypointCategory;
  waypoints: Waypoint[];
};

// SVG Icons for each platform
export const BlueskySVG = () => (
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="24" height="24">
    <path fill="currentColor" d="M111.8 62.2C170.2 105.9 233 194.7 256 242.4c23-47.6 85.8-136.4 144.2-180.2c42.1-31.6 110.3-56 110.3 21.8c0 15.5-8.9 130.5-14.1 149.2C478.2 298 412 314.6 353.1 304.5c102.9 17.5 129.1 75.5 72.5 133.5c-107.4 110.2-154.3-27.6-166.3-62.9l0 0c-1.7-4.9-2.6-7.8-3.3-7.8s-1.6 3-3.3 7.8l0 0c-12 35.3-59 173.1-166.3 62.9c-56.5-58-30.4-116 72.5-133.5C100 314.6 33.8 298 15.7 233.1C10.4 214.4 1.5 99.4 1.5 83.9c0-77.8 68.2-53.4 110.3-21.8z"/>
  </svg>
);

export const BlackskySVG = () => (
  <svg width="24" height="24" viewBox="0 0 285 243" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g clipPath="url(#clip0_1011_989)">
      <path d="M148.846 144.562C148.846 159.75 161.158 172.062 176.346 172.062H207.012V185.865H176.346C161.158 185.865 148.846 198.177 148.846 213.365V243.045H136.029V213.365C136.029 198.177 123.717 185.865 108.529 185.865H77.8633V172.062H108.529C123.717 172.062 136.029 159.75 136.029 144.562V113.896H148.846V144.562Z" fill="currentColor"/>
      <path d="M170.946 31.8766C160.207 42.616 160.207 60.0281 170.946 70.7675L192.631 92.4516L182.871 102.212L161.186 80.5275C150.447 69.7881 133.035 69.7881 122.296 80.5275L101.309 101.514L92.2456 92.4509L113.232 71.4642C123.972 60.7248 123.972 43.3128 113.232 32.5733L91.5488 10.8899L101.309 1.12988L122.993 22.814C133.732 33.5533 151.144 33.5534 161.884 22.814L183.568 1.12988L192.631 10.1925L170.946 31.8766Z" fill="currentColor"/>
      <path d="M79.0525 75.3259C75.1216 89.9962 83.8276 105.076 98.498 109.006L128.119 116.943L124.547 130.275L94.9267 122.338C80.2564 118.407 65.1772 127.113 61.2463 141.784L53.5643 170.453L41.1837 167.136L48.8654 138.467C52.7963 123.797 44.0902 108.718 29.4199 104.787L-0.201172 96.8497L3.37124 83.5173L32.9923 91.4542C47.6626 95.3851 62.7419 86.679 66.6728 72.0088L74.6098 42.3877L86.9895 45.7048L79.0525 75.3259Z" fill="currentColor"/>
      <path d="M218.413 71.4229C222.344 86.093 237.423 94.7992 252.094 90.8683L281.715 82.9313L285.287 96.2628L255.666 104.2C240.995 108.131 232.29 123.21 236.22 137.88L243.902 166.55L231.522 169.867L223.841 141.198C219.91 126.528 204.831 117.822 190.16 121.753L160.539 129.69L156.967 116.357L186.588 108.42C201.258 104.49 209.964 89.4103 206.033 74.74L198.096 45.1189L210.476 41.8018L218.413 71.4229Z" fill="currentColor"/>
    </g>
    <defs>
      <clipPath id="clip0_1011_989">
        <rect width="285" height="243" fill="white"/>
      </clipPath>
    </defs>
  </svg>
);

export const PdslsSVG = () => (
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
    <path fill="currentColor" d="M14 1a3 3 0 0 1 2.348 4.868l2 3.203Q18.665 9 19 9a3 3 0 1 1-2.347 1.132l-2-3.203a3 3 0 0 1-1.304 0l-2.001 3.203c.408.513.652 1.162.652 1.868s-.244 1.356-.653 1.868l2.002 3.203Q13.664 17 14 17a3 3 0 1 1-2.347 1.132L9.65 14.929a3 3 0 0 1-1.302 0l-2.002 3.203a3 3 0 1 1-1.696-1.06l2.002-3.204A3 3 0 0 1 9.65 9.07l2.002-3.202A3 3 0 0 1 14 1" />
  </svg>
);

export const LeafletSVG = () => (
  <svg width="24" height="24" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fillRule="evenodd" clipRule="evenodd" d="M6.19354 43.7615C4.02326 47.9529 2.3971 50.6787 0.825968 54.5903C-0.40065 57.6442 1.08066 61.1142 4.13453 62.3408C7.18841 63.5675 10.6584 62.0862 11.8851 59.0323C12.1956 58.2591 12.4949 57.4976 12.784 56.7619L12.7867 56.755C13.8877 53.9534 14.8372 51.5562 15.9859 49.3971C17.2796 49.3269 18.7589 49.3161 20.4268 49.3067L20.6365 49.3056C23.6784 49.2888 27.3433 49.2687 30.5036 48.629C33.6657 47.989 37.5791 46.476 39.3089 42.4233C39.7772 41.3263 40.2521 39.7069 39.8363 38.0619C39.9611 38.0618 40.0889 38.0618 40.2201 38.0618C40.2903 38.0618 40.3619 38.0618 40.4348 38.0619C42.1036 38.063 44.452 38.0645 46.5513 37.4934C49.0009 36.8271 51.5766 35.2492 52.7066 31.9254C53.115 30.7244 53.1906 29.4632 52.8381 28.2712C52.9461 28.2521 53.0569 28.2327 53.1706 28.2127C53.2252 28.2032 53.2807 28.1935 53.3369 28.1837C54.7713 27.933 56.6912 27.5974 58.3315 26.9838C59.9271 26.3869 62.5489 25.0534 63.3345 21.9971C63.7822 20.2552 63.7353 18.411 62.7294 16.7456C62.3111 16.0531 61.779 15.5078 61.3069 15.1057C61.7466 14.5555 62.3058 13.79 62.6909 12.9455C63.3591 11.4803 63.7036 9.32754 62.3369 7.22123C60.7856 4.83067 58.1256 4.41306 56.8098 4.30487C55.4415 4.19236 53.9707 4.31254 52.9137 4.40806C52.7702 4.05645 52.5725 3.68669 52.2993 3.32178C50.832 1.36219 48.5559 1.19749 47.2748 1.23194C44.6865 1.30155 42.6621 2.45002 41.1987 3.64119C40.4307 4.26635 38.6031 6.82233 38.0052 7.48715C38.0052 5.10325 35.7086 3.89003 34.0939 3.64119C30.959 3.15806 29.0173 5.17673 27.2122 7.48715C24.962 10.3672 23.22 14.0741 21.1617 16.8593C20.4523 16.3978 19.6125 15.3179 18.2694 15.3803C16.0564 15.4831 14.5863 16.9832 13.6351 18.0097C11.9797 19.796 10.9264 23.0413 10.2095 25.4575C9.43004 28.9535 8.89843 30.4276 8.26688 34.2604C7.8913 36.5398 7.70089 38.3385 7.70089 40.8839C7.27002 41.7282 6.77687 42.635 6.19354 43.7615Z" fill="currentColor"/>
    <path fillRule="evenodd" clipRule="evenodd" d="M18.9944 18.4871C19.6421 19.0561 20.4012 19.7231 22.0388 19.1533C23.1095 18.7808 24.4933 16.3538 26.0373 13.6458C28.2942 9.68748 30.8934 5.12877 33.3576 5.50855C36.3301 5.96665 36.1471 7.6122 36.0064 8.87787C35.9077 9.76563 35.8298 10.4665 36.8761 10.4396C37.9419 10.4122 38.9792 9.15957 40.1829 7.70596C41.8456 5.69807 43.826 3.30666 46.6379 3.23104C48.6204 3.17772 48.5891 4.03205 48.5574 4.89842C48.5371 5.45219 48.5166 6.01088 49.0218 6.34062C49.5194 6.66547 50.7707 6.55195 52.2092 6.42146C54.5154 6.21226 57.3027 5.95942 58.2369 7.39914C59.0583 8.66485 58.0119 9.92284 57.0089 11.1286C56.1594 12.1499 55.341 13.1337 55.7152 14.0531C56.0204 14.8031 56.647 15.2257 57.2613 15.64C58.2659 16.3175 59.2375 16.9727 58.7159 19.0019C58.1644 21.1475 54.8463 21.7286 51.7361 22.2733C49.1306 22.7296 46.6709 23.1603 46.106 24.4639C45.7516 25.2816 46.3394 25.6623 46.9979 26.0889C47.7849 26.5986 48.673 27.1739 48.1751 28.6384C47.011 32.0622 43.1238 32.0622 39.4756 32.0623C36.3442 32.0623 33.3888 32.0624 32.4827 34.2275C31.9596 35.4776 32.7514 35.6982 33.6201 35.9404C34.6836 36.2368 35.8623 36.5653 34.8856 38.8535C33.0165 43.2324 26.0433 43.2715 19.6599 43.3073C17.3193 43.3205 15.058 43.3332 13.1567 43.5592C12.9396 43.585 12.7471 43.7095 12.6334 43.8962C10.8838 46.767 9.64296 49.9245 8.31937 53.2926C8.0286 54.0325 7.73384 54.7825 7.42881 55.542C7.02558 56.5459 5.88485 57.0328 4.88093 56.6296C3.877 56.2264 3.39005 55.0857 3.79328 54.0817C5.29513 50.3426 7.02775 46.9042 8.92229 43.7479C12.0142 38.0542 18.109 31.0686 24.5542 25.8207C30.2889 21.0461 35.7654 17.4724 42.1392 14.7607C42.9371 14.4212 42.7002 13.4882 41.8673 13.7289C36.2143 15.3625 31.2171 18.6029 26.0373 21.8684C20.4035 25.4201 15.6824 30.2231 12.7771 33.7151C12.2649 34.3308 11.1447 33.8245 11.306 33.04C12.5677 26.9025 13.87 21.27 15.7789 19.2101C17.5913 17.2543 18.2114 17.7992 18.9944 18.4871Z" fill="var(--bg-primary)"/>
  </svg>
);

export const RedDwarfSVG = () => (
  <svg fill="none" viewBox="0 0 24 24" width="24" height="24">
    <path fill="currentColor" d="M12.001 0A12 12 0 1 0 24 11.999A12.01 12.01 0 0 0 12.001 0m0 2.464a9.53 9.53 0 0 1 9.514 8.889a9.5 9.5 0 0 1-.863 4.649H3.35a9.53 9.53 0 0 1 .616-9.14a9.53 9.53 0 0 1 8.036-4.398"/>
  </svg>
);

export const CatskySVG = () => (
  <svg fill="none" viewBox="0 0 67.733328 67.733329" width="24" height="24">
    <path fill="currentColor" d="m 7.4595521,49.230487 -1.826355,1.186314 -0.00581,0.0064 c -0.6050542,0.41651 -1.129182,0.831427 -1.5159445,1.197382 -0.193382,0.182977 -0.3509469,0.347606 -0.4862911,0.535791 -0.067671,0.0941 -0.1322972,0.188188 -0.1933507,0.352343 -0.061048,0.164157 -0.1411268,0.500074 0.025624,0.844456 l 0.099589,0.200339 c 0.1666616,0.344173 0.4472046,0.428734 0.5969419,0.447854 0.1497358,0.01912 0.2507411,0.0024 0.352923,-0.02039 0.204367,-0.04555 0.4017284,-0.126033 0.6313049,-0.234117 0.4549828,-0.214229 1.0166476,-0.545006 1.6155328,-0.956275 l 0.014617,-0.01049 2.0855152,-1.357536 C 8.3399261,50.711052 7.8735929,49.979321 7.4596148,49.230532 Z"/>
    <path fill="currentColor" d="m 60.225246,49.199041 c -0.421632,0.744138 -0.895843,1.47112 -1.418104,2.178115 l 2.170542,1.413443 c 0.598885,0.411268 1.160549,0.742047 1.615532,0.956276 0.229578,0.108104 0.426937,0.188564 0.631304,0.234116 0.102186,0.02278 0.2061,0.03951 0.355838,0.02039 0.148897,-0.01901 0.427619,-0.104957 0.594612,-0.444358 l 0.0029,-0.0035 0.09667,-0.20034 h 0.0029 c 0.166756,-0.34438 0.08667,-0.680303 0.02562,-0.844455 -0.06104,-0.164158 -0.125675,-0.258251 -0.193352,-0.352343 -0.135356,-0.188186 -0.293491,-0.352814 -0.486873,-0.535792 -0.386891,-0.366 -0.911016,-0.780916 -1.516073,-1.197426 l -0.0082,-0.007 z"/>
    <path fill="currentColor" d="m 62.374822,42.996075 c -0.123437,0.919418 -0.330922,1.827482 -0.614997,2.71973 h 2.864745 c 0.698786,0 1.328766,-0.04848 1.817036,-0.1351 0.244137,-0.04331 0.449793,-0.09051 0.645864,-0.172979 0.09803,-0.04122 0.194035,-0.08458 0.315651,-0.190439 0.121618,-0.105868 0.330211,-0.348705 0.330211,-0.746032 v -0.233536 c 0,-0.397326 -0.208544,-0.637282 -0.330211,-0.743122 -0.121662,-0.105838 -0.217613,-0.152159 -0.315651,-0.193351 -0.196079,-0.08238 -0.401748,-0.129732 -0.645864,-0.17296 -0.488229,-0.08645 -1.118333,-0.132208 -1.817036,-0.132208 z"/>
    <path fill="currentColor" d="m 3.1074004,42.996075 c -0.6987018,0 -1.3264778,0.04576 -1.8147079,0.132208 -0.2441143,0.04324 -0.44978339,0.09059 -0.64586203,0.17296 -0.0980369,0.04118 -0.19398758,0.08751 -0.31565316,0.193351 C 0.20951466,43.600432 0.0015501,43.84039 0.0015501,44.237717 v 0.233535 c 0,0.397326 0.20800926,0.640175 0.32962721,0.746034 0.12161784,0.105867 0.21761904,0.149206 0.31565316,0.190437 0.19606972,0.08246 0.40172683,0.129657 0.64586203,0.172979 0.4882704,0.08663 1.1159226,0.1351 1.8147079,0.1351 H 5.9517617 C 5.6756425,44.822849 5.4740706,43.914705 5.3542351,42.996072 Z"/>
    <path fill="currentColor" d="m 64.667084,33.5073 c -0.430203,0 -0.690808,0.160181 -1.103618,0.372726 -0.41281,0.212535 -0.895004,0.507161 -1.40529,0.858434 l -0.84038,0.578305 c 0.360074,0.820951 0.644317,1.675211 0.844456,2.560741 l 1.136813,-0.78214 c 0.605058,-0.41651 1.12918,-0.834919 1.515944,-1.200875 0.193382,-0.182976 0.350947,-0.347609 0.486291,-0.535795 0.06767,-0.0941 0.132313,-0.188185 0.193351,-0.352341 0.06104,-0.164157 0.141126,-0.497171 -0.02562,-0.841544 L 65.369444,33.96156 C 65.163418,33.537073 64.829889,33.5073 64.669999,33.5073 Z"/>
    <path fill="currentColor" d="m 3.0648864,33.5073 c -0.1600423,3.64e-4 -0.4969719,0.0355 -0.7000249,0.45426 l -0.099589,0.203251 c -0.16676,0.344375 -0.089013,0.677388 -0.027951,0.841544 0.061047,0.164157 0.1285982,0.258248 0.1962636,0.352341 0.1353547,0.188186 0.2899962,0.352819 0.4833782,0.535795 0.386764,0.365956 0.9138003,0.784365 1.518856,1.200875 l 1.1478766,0.78971 c 0.2068,-0.879769 0.5000939,-1.727856 0.8706646,-2.542104 v -5.81e-4 L 5.5761273,34.73846 C 5.065553,34.38699 4.5814871,34.09259 4.1685053,33.880026 3.7555236,33.667462 3.4962107,33.506322 3.0648893,33.5073 Z"/>
    <path fill="currentColor" d="m 34.206496,25.930929 c -7.358038,0 -14.087814,1.669555 -18.851571,4.452678 -4.763758,2.783122 -7.4049994,6.472247 -7.4049994,10.665932 0,4.229683 2.6374854,8.946766 7.2694834,12.60017 4.631996,3.653402 11.153152,6.176813 18.420538,6.176813 7.267388,0 13.908863,-2.52485 18.657979,-6.185354 4.749117,-3.660501 7.485285,-8.390746 7.485285,-12.591629 0,-4.236884 -2.494219,-7.904081 -7.079874,-10.67732 -4.585655,-2.773237 -11.1388,-4.44129 -18.496841,-4.44129 z"/>
    <path fill="currentColor" d="m 51.797573,6.1189692 c -0.02945,-7.175e-4 -0.05836,4.17e-5 -0.08736,5.831e-4 -0.143066,0.00254 -0.278681,0.00746 -0.419898,0.094338 -0.483586,0.2975835 -0.980437,0.9277726 -1.446058,1.5345809 -1.170891,1.5259255 -2.372514,3.8701448 -4.229269,7.0095668 -0.839492,1.419423 -2.308256,4.55051 -3.891486,8.089307 4.831393,0.745951 9.148869,2.222975 12.643546,4.336427 2.130458,1.288425 3.976812,2.848736 5.416167,4.643344 C 58.614334,27.483611 57.260351,22.206768 56.421696,19.015263 55.149066,14.172268 54.241403,10.340754 53.185389,8.0524745 52.815225,7.2503647 52.540611,6.4969378 52.052073,6.1836069 51.974407,6.1337905 51.885945,6.1211124 51.79757,6.1189646 Z"/>
    <path fill="currentColor" d="m 15.935563,6.1189692 c -0.08837,0.00223 -0.176832,0.014766 -0.254502,0.064642 -0.48854,0.3133308 -0.763154,1.0667562 -1.13332,1.8688677 -1.056011,2.2882791 -1.963673,6.1197931 -3.236303,10.9627891 -0.85539,3.255187 -2.247014,8.680054 -3.4314032,13.071013 1.5346704,-1.910372 3.5390122,-3.56005 5.8517882,-4.91124 3.456591,-2.019439 7.668347,-3.458497 12.320324,-4.231015 C 24.452511,19.365796 22.96466,16.190327 22.117564,14.758042 20.260808,11.61862 19.059771,9.2744012 17.888878,7.7484762 17.423256,7.1416679 16.926404,6.5114787 16.442819,6.2138951 16.301603,6.127059 16.165987,6.1222115 16.02292,6.1195569 c -0.02901,-5.429e-4 -0.0579,-0.0013 -0.08734,-5.847e-4 z"/>
  </svg>
);

export const WitchskySVG = () => (
  <svg fill="none" viewBox="0 0 512 512" width="24" height="24">
    <path fill="currentColor" d="M374.473 57.7173C367.666 50.7995 357.119 49.1209 348.441 53.1659C347.173 53.7567 342.223 56.0864 334.796 59.8613C326.32 64.1696 314.568 70.3869 301.394 78.0596C275.444 93.1728 242.399 114.83 218.408 139.477C185.983 172.786 158.719 225.503 140.029 267.661C130.506 289.144 122.878 308.661 117.629 322.81C116.301 326.389 115.124 329.63 114.104 332.478C87.1783 336.42 64.534 341.641 47.5078 348.101C37.6493 351.84 28.3222 356.491 21.0573 362.538C13.8818 368.511 6.00003 378.262 6.00003 391.822C6.00014 403.222 11.8738 411.777 17.4566 417.235C23.0009 422.655 29.9593 426.793 36.871 430.062C50.8097 436.653 69.5275 441.988 90.8362 446.249C133.828 454.846 192.21 460 256.001 460C319.79 460 378.172 454.846 421.164 446.249C442.472 441.988 461.19 436.653 475.129 430.062C482.041 426.793 488.999 422.655 494.543 417.235C500.039 411.862 505.817 403.489 505.996 392.353L506 391.822L505.995 391.188C505.754 377.959 498.012 368.417 490.945 362.534C483.679 356.485 474.35 351.835 464.491 348.095C446.749 341.366 422.906 335.982 394.476 331.987C393.6 330.57 392.633 328.995 391.595 327.273C386.477 318.777 379.633 306.842 372.737 293.115C358.503 264.781 345.757 232.098 344.756 206.636C343.87 184.121 351.638 154.087 360.819 127.789C365.27 115.041 369.795 103.877 373.207 95.9072C374.909 91.9309 376.325 88.7712 377.302 86.6328C377.79 85.5645 378.167 84.7524 378.416 84.2224C378.54 83.9579 378.632 83.7635 378.69 83.643C378.718 83.5829 378.739 83.5411 378.75 83.5181C378.753 83.5108 378.756 83.5049 378.757 83.5015C382.909 74.8634 381.196 64.5488 374.473 57.7173Z"/>
  </svg>
);

export const DeerSVG = () => (
  <svg fill="none" viewBox="0 0 512 512" width="24" height="24">
    <path fill="currentColor" d="m 149.96484,186.56641 46.09766,152.95898 c 0,0 -6.30222,-9.61174 -15.60547,-17.47656 -8.87322,-7.50128 -28.4082,-4.04492 -28.4082,-4.04492 0,0 6.14721,39.88867 15.53125,44.39843 10.71251,5.1482 22.19726,0.16993 22.19726,0.16993 0,0 11.7613,-4.87282 22.82032,31.82421 5.26534,17.47196 15.33258,50.877 20.9707,69.58594 2.16717,7.1913 8.83789,7.25781 8.83789,7.25781 0,0 6.67072,-0.0665 8.83789,-7.25781 5.63812,-18.70894 15.70536,-52.11398 20.9707,-69.58594 11.05902,-36.69703 22.82032,-31.82421 22.82032,-31.82421 0,0 11.48475,4.97827 22.19726,-0.16993 9.38404,-4.50976 15.5332,-44.39843 15.5332,-44.39843 0,0 -19.53693,-3.45636 -28.41015,4.04492 -9.30325,7.86482 -15.60547,17.47656 -15.60547,17.47656 l 46.09766,-152.95898 -49.32618,83.84179 -20.34375,-31.1914 6.35547,54.96875 -23.1582,39.36132 c 0,0 -2.97595,5.06226 -5.94336,4.68946 -0.009,-0.001 -0.0169,0.003 -0.0254,0.01 -0.008,-0.007 -0.0167,-0.0109 -0.0254,-0.01 -2.96741,0.3728 -5.94336,-4.68946 -5.94336,-4.68946 l -23.1582,-39.36132 6.35547,-54.96875 -20.34375,31.1914 z" transform="matrix(2.6921023,0,0,1.7145911,-396.58283,-308.01527)"/>
  </svg>
);

export const TangledSVG = () => (
  <svg viewBox="0 0 25 25" width="24" height="24">
    <path fill="currentColor" d="m 16.775491,24.987061 c -0.78517,-0.0064 -1.384202,-0.234614 -2.033994,-0.631295 -0.931792,-0.490188 -1.643475,-1.31368 -2.152014,-2.221647 C 11.781409,23.136647 10.701392,23.744942 9.4922931,24.0886 8.9774725,24.238111 8.0757679,24.389777 6.5811304,23.84827 4.4270703,23.124679 2.8580086,20.883331 3.0363279,18.599583 3.0037061,17.652919 3.3488675,16.723769 3.8381157,15.925061 2.5329485,15.224503 1.4686756,14.048584 1.0611184,12.606459 0.81344502,11.816973 0.82385989,10.966486 0.91519098,10.154906 1.2422711,8.2387903 2.6795811,6.5725716 4.5299585,5.9732484 5.2685364,4.290122 6.8802592,3.0349975 8.706276,2.7794663 c 1.2124148,-0.1688264 2.46744,0.084987 3.52811,0.7011837 1.545426,-1.7139736 4.237779,-2.2205077 6.293579,-1.1676231 1.568222,0.7488935 2.689625,2.3113526 2.961888,4.0151464 1.492195,0.5977882 2.749007,1.8168898 3.242225,3.3644951 0.329805,0.9581836 0.340709,2.0135956 0.127128,2.9974286 -0.381606,1.535184 -1.465322,2.842146 -2.868035,3.556463 0.0034,0.273204 0.901506,2.243045 0.751284,3.729647 -0.03281,1.858525 -1.211631,3.619894 -2.846433,4.475452 -0.953967,0.556812 -2.084452,0.546309 -3.120531,0.535398 z m -4.470079,-5.349839 c 1.322246,-0.147248 2.189053,-1.300106 2.862307,-2.338363 0.318287,-0.472954 0.561404,-1.002348 0.803,-1.505815 0.313265,0.287151 0.578698,0.828085 1.074141,0.956909 0.521892,0.162542 1.133743,0.03052 1.45325,-0.443554 0.611414,-1.140449 0.31004,-2.516537 -0.04602,-3.698347 C 18.232844,11.92927 17.945151,11.232927 17.397785,10.751793 17.514522,9.9283111 17.026575,9.0919791 16.332883,8.6609491 15.741721,9.1323278 14.842258,9.1294949 14.271975,8.6252369 13.178927,9.7400102 12.177239,9.7029996 11.209704,8.8195135 10.992255,8.6209543 10.577326,10.031484 9.1211947,9.2324497 8.2846288,9.9333947 7.6359672,10.607693 7.0611981,11.578553 6.5026891,12.62523 5.9177873,13.554793 5.867393,14.69141 c -0.024234,0.66432 0.4948601,1.360337 1.1982269,1.306329 0.702996,0.06277 1.1815208,-0.629091 1.7138087,-0.916491 0.079382,0.927141 0.1688108,1.923227 0.4821259,2.828358 0.3596254,1.171275 1.6262605,1.915695 2.8251855,1.745211 0.08481,-0.0066 0.218672,-0.01769 0.218672,-0.0176 z m 0.686342,-3.497495 c -0.643126,-0.394168 -0.33365,-1.249599 -0.359402,-1.870938 0.064,-0.749774 0.115321,-1.538054 0.452402,-2.221125 0.356724,-0.487008 1.226721,-0.299139 1.265134,0.325689 -0.02558,0.628509 -0.314101,1.25416 -0.279646,1.9057 -0.07482,0.544043 0.05418,1.155133 -0.186476,1.652391 -0.197455,0.275121 -0.599638,0.355105 -0.892012,0.208283 z m -2.808766,-0.358124 c -0.605767,-0.328664 -0.4133176,-1.155655 -0.5083256,-1.73063 0.078762,-0.66567 0.013203,-1.510085 0.5705316,-1.976886 0.545037,-0.380109 1.286917,0.270803 1.029164,0.868384 -0.274913,0.755214 -0.09475,1.580345 -0.08893,2.34609 -0.104009,0.451702 -0.587146,0.691508 -1.002445,0.493042 z" />
  </svg>
);

export const PinskySVG = () => (
  <svg viewBox="0 0 512 512" width="24" height="24" xmlns="http://www.w3.org/2000/svg" className="-ml-0.5 h-8 text-brand-primary lg:ml-0">
    <g>
      <path fill="currentColor" d="M 208.621 314.167 C 207.265 316.222 205.968 318.315 204.708 320.429 C 203.149 322.581 201.539 324.689 199.925 326.8 C 198.147 329.129 196.403 331.481 194.662 333.837 C 190.539 339.369 186.219 344.736 181.848 350.074 C 178.893 353.711 176.266 357.307 173.969 361.413 C 175.93 363.881 176.919 364.758 180.086 365.239 C 181.15 365.232 182.215 365.224 183.311 365.216 C 184.519 365.216 185.727 365.216 186.971 365.215 C 188.273 365.198 189.576 365.18 190.917 365.162 C 192.252 365.157 193.586 365.152 194.961 365.147 C 199.23 365.128 203.498 365.085 207.767 365.042 C 210.658 365.025 213.55 365.009 216.441 364.995 C 223.535 364.961 230.628 364.894 237.723 364.829 C 237.723 346.795 237.723 328.762 237.723 310.183 C 215.886 307.758 215.886 307.758 208.621 314.167 L 208.621 314.167 L 208.621 314.167 Z  M 338.536 0.323 C 339.276 0.315 340.015 0.308 340.777 0.3 C 343.216 0.278 345.655 0.264 348.095 0.253 C 348.932 0.248 349.769 0.244 350.631 0.239 C 355.065 0.215 359.498 0.199 363.931 0.188 C 368.489 0.176 373.046 0.136 377.604 0.091 C 381.127 0.061 384.65 0.052 388.173 0.048 C 389.852 0.042 391.531 0.029 393.209 0.008 C 406.998 -0.156 417.626 2.148 427.844 11.909 C 436.778 22.707 438.538 31.79 438.574 45.53 C 438.588 47.989 438.644 50.445 438.701 52.904 C 438.712 54.47 438.72 56.036 438.726 57.602 C 438.741 59.02 438.757 60.437 438.772 61.897 C 438.09 65.416 438.09 65.416 435.409 67.652 C 432.398 68.831 432.398 68.831 429.12 68.195 C 424.416 66.023 420.045 63.416 415.661 60.673 C 407.646 55.871 399.472 56.144 390.422 56.197 C 389.372 56.199 388.322 56.2 387.24 56.202 C 383.911 56.208 380.583 56.223 377.254 56.237 C 374.987 56.243 372.72 56.248 370.452 56.253 C 364.916 56.265 359.381 56.285 353.845 56.308 C 354.458 56.916 355.072 57.523 355.704 58.149 C 358.526 60.948 361.344 63.751 364.162 66.554 C 365.127 67.51 366.092 68.465 367.086 69.449 C 372.102 74.446 376.923 79.513 381.534 84.885 C 384.841 88.627 388.419 92.09 391.983 95.585 C 396.93 100.48 401.729 105.379 406.213 110.705 C 409.671 114.54 413.362 118.136 417.029 121.769 C 440.92 145.534 456.437 170.996 456.732 205.659 C 456.794 235.826 446.289 260.073 425.781 282.006 C 407.412 299.492 382.719 310.423 357.325 310.312 C 356.325 310.312 355.324 310.312 354.294 310.313 C 351.004 310.312 347.715 310.303 344.426 310.294 C 342.138 310.292 339.851 310.29 337.563 310.289 C 331.556 310.285 325.548 310.274 319.54 310.261 C 312.325 310.247 305.11 310.242 297.895 310.235 C 286.945 310.224 275.995 310.203 265.045 310.183 C 265.045 328.216 265.045 346.249 265.045 364.829 C 270.282 364.762 275.518 364.696 280.913 364.628 C 284.244 364.599 287.574 364.572 290.905 364.551 C 296.184 364.517 301.463 364.477 306.742 364.399 C 311.001 364.337 315.26 364.303 319.519 364.288 C 321.139 364.278 322.758 364.258 324.377 364.227 C 333.667 364.057 341.044 364.016 348.152 370.521 C 354.938 377.336 356.552 382.664 356.62 392.009 C 356.657 392.909 356.694 393.808 356.733 394.735 C 356.777 399.529 356.467 402.598 353.387 406.391 C 348.845 410.748 345.786 410.811 339.672 410.776 C 334.993 410.117 333.109 408.091 329.937 404.674 C 328.799 402.397 328.799 402.397 328.799 392.151 C 307.76 392.151 286.722 392.151 265.045 392.151 C 265.045 422.206 265.045 452.262 265.045 483.227 C 271.432 483.227 277.819 483.227 284.399 483.227 C 292.181 489.713 292.181 489.713 292.68 493.669 C 293.03 502.573 293.03 502.573 289.878 506.566 C 285.159 510.76 281.236 511.975 274.98 511.991 C 273.29 511.996 273.29 511.996 271.565 512 C 270.4 511.991 269.234 511.982 268.034 511.973 C 266.877 511.982 265.721 511.991 264.53 512 C 255.497 511.977 247.857 511.577 241.138 504.858 C 237.434 498.992 237.25 494.241 237.335 487.533 C 237.334 486.499 237.334 485.465 237.333 484.4 C 237.336 481 237.362 477.6 237.389 474.2 C 237.395 471.836 237.4 469.472 237.404 467.108 C 237.417 460.898 237.45 454.688 237.488 448.478 C 237.523 442.137 237.539 435.795 237.556 429.453 C 237.592 417.019 237.651 404.585 237.723 392.151 C 236.892 392.164 236.062 392.177 235.206 392.19 C 227.336 392.304 219.465 392.391 211.594 392.446 C 207.548 392.476 203.504 392.516 199.458 392.581 C 194.795 392.655 190.133 392.682 185.47 392.707 C 184.034 392.737 182.599 392.766 181.12 392.796 C 170.455 392.8 162.943 390.623 154.758 383.684 C 148.061 375.608 145.016 368.616 145.579 358.069 C 147.11 347.032 153.285 339.409 160.423 331.207 C 163.961 327.054 167.17 322.689 170.367 318.272 C 170.937 317.49 171.507 316.708 172.094 315.902 C 173.48 313.998 174.864 312.091 176.246 310.183 C 174.921 310.193 173.595 310.203 172.23 310.214 C 159.734 310.306 147.238 310.374 134.741 310.419 C 128.317 310.443 121.893 310.475 115.469 310.526 C 109.268 310.576 103.068 310.603 96.867 310.615 C 94.502 310.623 92.137 310.64 89.773 310.664 C 86.458 310.697 83.145 310.702 79.831 310.7 C 78.855 310.716 77.879 310.733 76.873 310.749 C 69.804 310.701 65.7 308.834 60.529 303.81 C 54.779 296.599 54.936 290.663 55.57 281.722 C 60.157 246.346 72.819 212.811 95.416 184.953 C 95.913 184.341 96.409 183.729 96.921 183.099 C 129.092 143.679 175.083 116.436 225.941 110.172 C 244.904 108.397 265.212 107.661 283.261 114.369 C 284.473 114.808 285.685 115.247 286.934 115.699 C 305.777 123.069 319.879 134.655 333.906 148.905 C 335.782 150.81 337.665 152.708 339.551 154.605 C 343.539 158.619 347.518 162.642 351.497 166.667 C 356.14 171.364 360.786 176.057 365.443 180.74 C 367.294 182.606 369.138 184.479 370.982 186.352 C 372.115 187.493 373.248 188.633 374.381 189.774 C 375.856 191.267 375.856 191.267 377.361 192.79 C 380.834 195.926 383.23 197.3 387.856 197.903 C 392.349 197.364 394.726 195.704 398.244 192.922 C 400.287 188.837 400.171 184.841 399.383 180.399 C 397.933 178.106 397.933 178.106 395.922 176.062 C 395.195 175.276 394.468 174.49 393.719 173.68 C 390.01 169.838 386.269 166.036 382.466 162.287 C 381.181 161.013 381.181 161.013 379.871 159.714 C 378.027 157.885 376.181 156.058 374.334 154.232 C 371.406 151.334 368.483 148.431 365.561 145.526 C 357.259 137.273 348.954 129.022 340.631 120.79 C 335.526 115.741 330.432 110.68 325.346 105.612 C 323.414 103.691 321.478 101.775 319.538 99.863 C 316.82 97.183 314.116 94.489 311.415 91.792 C 310.622 91.017 309.828 90.242 309.011 89.443 C 298.993 79.363 292.05 67.333 291.835 52.906 C 291.847 52.009 291.858 51.113 291.87 50.189 C 291.88 49.243 291.889 48.298 291.899 47.323 C 292.3 32.708 298.585 21.018 309.16 10.984 C 317.707 3.923 327.58 0.415 338.536 0.323 L 338.536 0.323 L 338.536 0.323 Z" />
    </g>
  </svg>
);

export const WAYPOINT_DESTINATIONS: Record<string, Waypoint> = {
  anisota: {
    id: 'anisota',
    name: 'Anisota',
    description: 'View on anisota.net',
    icon: <MoonStar size={24} strokeWidth={2} />,
    getUrl: (handle, collection, rkey) => {
      if (collection && rkey) {
        // For standard posts, use the profile/post URL
        if (collection === 'app.bsky.feed.post') {
          return `https://anisota.net/profile/${handle}/post/${rkey}`;
        }
        // For arbitrary records, use the explorer URL
        return `https://anisota.net/explorer/${handle}/${collection}/${rkey}`;
      }
      return `https://anisota.net/profile/${handle}`;
    },
    supportedTypes: ['post', 'profile', 'list', 'record'],
    category: 'blueskyClients',
  },
  
  bluesky: {
    id: 'bluesky',
    name: 'Bluesky',
    description: 'View on bsky.app',
    icon: <BlueskySVG />,
    getUrl: (handle, collection, rkey) => {
      if (collection && rkey) {
        return `https://bsky.app/profile/${handle}/post/${rkey.replace('app.bsky.feed.post/', '')}`;
      }
      return `https://bsky.app/profile/${handle}`;
    },
    supportedTypes: ['post', 'profile', 'list'],
    category: 'blueskyClients',
  },
  
  blacksky: {
    id: 'blacksky',
    name: 'Blacksky',
    description: 'View on blacksky.community',
    icon: <BlackskySVG />,
    getUrl: (handle, collection, rkey) => {
      if (collection && rkey) {
        return `https://blacksky.community/profile/${handle}/post/${rkey}`;
      }
      return `https://blacksky.community/profile/${handle}`;
    },
    supportedTypes: ['post', 'profile', 'list'],
    category: 'blueskyForks',
  },

  reddwarf: {
    id: 'reddwarf',
    name: 'Red Dwarf',
    description: 'Open on reddwarf.app',
    icon: <RedDwarfSVG />,
    getUrl: (handle, collection, rkey) => {
      if (collection && rkey) {
        return `https://reddwarf.app/profile/${handle}/post/${rkey}`;
      }
      return `https://reddwarf.app/profile/${handle}`;
    },
    supportedTypes: ['post', 'profile', 'list'],
    category: 'blueskyForks',
  },

  leaflet: {
    id: 'leaflet',
    name: 'Leaflet',
    description: 'Minimalist ATProto reader',
    icon: <LeafletSVG />,
    getUrl: (handle) => {
      // Leaflet doesn't have post pages yet, always go to profile
      return `https://leaflet.pub/p/${handle}`;
    },
    supportedTypes: ['profile'],
    category: 'atmosphereApps',
  },

  pdsls: {
    id: 'pdsls',
    name: 'PDSls',
    description: 'View raw record on pdsls.dev',
    icon: <PdslsSVG />,
    getUrl: (handle, collection, rkey, did) => {
      // PDSls uses at:// URI format with DID preferred
      const identifier = did || handle;
      
      if (collection && rkey) {
        return `https://pdsls.dev/at://${identifier}/${collection}/${rkey}`;
      }
      return `https://pdsls.dev/at://${identifier}`;
    },
    supportedTypes: ['post', 'profile', 'list', 'record'],
    category: 'devTools',
  },

  anisotaExplorer: {
    id: 'anisotaExplorer',
    name: 'Anisota Explorer',
    description: 'Explore raw record on anisota.net',
    icon: <MoonStar size={24} strokeWidth={2} />,
    getUrl: (handle, collection, rkey) => {
      if (collection && rkey) {
        // Always use the explorer URL for raw records
        return `https://anisota.net/explorer/${handle}/${collection}/${rkey}`;
      }
      return `https://anisota.net/explorer/${handle}`;
    },
    supportedTypes: ['post', 'profile', 'list', 'record'],
    category: 'devTools',
  },

  atptools: {
    id: 'atptools',
    name: 'atp.tools',
    description: 'View on atp.tools',
    icon: <Wrench size={24} strokeWidth={2} />,
    getUrl: (handle, collection, rkey, did) => {
      // Use the at:/ format with DID if available, otherwise handle
      const identifier = did || handle;
      
      if (collection && rkey) {
        return `https://atp.tools/at:/${identifier}/${collection}/${rkey}`;
      }
      return `https://atp.tools/at:/${identifier}`;
    },
    supportedTypes: ['post', 'profile', 'list', 'record'],
    category: 'devTools',
  },

  witchsky: {
    id: 'witchsky',
    name: 'Witchsky',
    description: 'View on witchsky.app',
    icon: <WitchskySVG />,
    getUrl: (handle, collection, rkey) => {
      if (collection && rkey) {
        return `https://witchsky.app/profile/${handle}/post/${rkey}`;
      }
      return `https://witchsky.app/profile/${handle}`;
    },
    supportedTypes: ['post', 'profile', 'list'],
    category: 'blueskyForks',
  },

  catsky: {
    id: 'catsky',
    name: 'Catsky',
    description: 'View on catsky.social',
    icon: <CatskySVG />,
    getUrl: (handle, collection, rkey) => {
      if (collection && rkey) {
        return `https://catsky.social/profile/${handle}/post/${rkey}`;
      }
      return `https://catsky.social/profile/${handle}`;
    },
    supportedTypes: ['post', 'profile', 'list'],
    category: 'blueskyForks',
  },

  deer: {
    id: 'deer',
    name: 'Deer',
    description: 'View on deer.social',
    icon: <DeerSVG />,
    getUrl: (handle, collection, rkey) => {
      if (collection && rkey) {
        return `https://deer.social/profile/${handle}/post/${rkey}`;
      }
      return `https://deer.social/profile/${handle}`;
    },
    supportedTypes: ['post', 'profile', 'list'],
    category: 'blueskyForks',
  },

  smokesignal: {
    id: 'smokesignal',
    name: 'Smoke Signal',
    description: 'View event on smokesignal.events',
    icon: <CalendarFold size={24} strokeWidth={2} />,
    getUrl: (handle, collection, rkey, did) => {
      // Smoke Signal requires DIDs, not handles
      const identifier = did || handle;
      
      // Only show for calendar events or profiles
      if (collection && rkey) {
        // Only support community.lexicon.calendar.event
        if (collection === 'community.lexicon.calendar.event') {
          return `https://smokesignal.events/${identifier}/${rkey}`;
        }
        // Not compatible with this collection type
        return null;
      }
      // Profile view
      return `https://smokesignal.events/${identifier}`;
    },
    supportedTypes: ['profile', 'record'],
    category: 'atmosphereApps',
  },

  tangled: {
    id: 'tangled',
    name: 'Tangled',
    description: 'View on tangled.org',
    icon: <TangledSVG />,
    getUrl: (handle, collection, rkey) => {
      if (collection && rkey) {
        // Only support sh.tangled.repo collection
        if (collection === 'sh.tangled.repo') {
          // Note: Tangled URLs are typically like https://tangled.org/{namespace}/{repo}
          // where namespace and repo come from the record data itself.
          // Since we don't have access to record data here, we link to the profile.
          // The profile page will show all repos for that user.
          return `https://tangled.org/${handle}`;
        }
        // Not compatible with this collection type
        return null;
      }
      // Profile view
      return `https://tangled.org/${handle}`;
    },
    supportedTypes: ['profile', 'record'],
    category: 'atmosphereApps',
  },

  tokimeki: {
    id: 'tokimeki',
    name: 'TOKIMEKI',
    description: 'View on tokimeki.blue',
    icon: <Rainbow size={24} strokeWidth={2} />,
    getUrl: (handle, collection, rkey) => {
      if (collection && rkey) {
        return `https://tokimeki.blue/profile/${handle}/post/${rkey}`;
      }
      return `https://tokimeki.blue/profile/${handle}`;
    },
    supportedTypes: ['post', 'profile', 'list'],
    category: 'blueskyClients',
  },

  pinksky: {
    id: 'pinksky',
    name: 'Pinksky',
    description: 'View on pinksky.app',
    icon: <PinskySVG />,
    getUrl: (handle, collection, rkey) => {
      if (collection && rkey) {
        return `https://pinksky.app/profile/${handle}/post/${rkey}`;
      }
      return `https://pinksky.app/profile/${handle}`;
    },
    supportedTypes: ['post', 'profile', 'list'],
    category: 'atmosphereApps',
  },
};

export const WAYPOINT_ORDER = [
  'anisota',
  'bluesky',
  'tokimeki',
  'blacksky',
  'reddwarf',
  'leaflet',
  'pinksky',
  'pdsls',
  'anisotaExplorer',
  'smokesignal',
  'tangled',
  'atptools',
  'witchsky',
  'catsky',
  'deer',
];

/**
 * Get waypoints available for a specific content type
 */
export function getWaypointsForType(type: WaypointType): Waypoint[] {
  return WAYPOINT_ORDER
    .map(id => WAYPOINT_DESTINATIONS[id])
    .filter(waypoint => waypoint.supportedTypes.includes(type));
}

/**
 * Get total count of waypoint destinations
 */
export function getWaypointCount(): number {
  return WAYPOINT_ORDER.length;
}

/**
 * Category definitions
 */
export const WAYPOINT_CATEGORIES: Record<string, WaypointCategory> = {
  blueskyClients: {
    id: 'blueskyClients',
    name: 'Bluesky Clients',
    description: 'Official and alternative Bluesky clients',
    defaultWaypointId: 'bluesky',
    subcategories: [{
      id: 'blueskyForks',
      name: 'Bluesky Forks',
      description: 'Community-built Bluesky variants',
      defaultWaypointId: 'blacksky',
    }],
  },
  blueskyForks: {
    id: 'blueskyForks',
    name: 'Bluesky Forks',
    description: 'Community-built Bluesky variants',
    defaultWaypointId: 'blacksky',
  },
  atmosphereApps: {
    id: 'atmosphereApps',
    name: 'ATmosphere Apps',
    description: 'Apps built on the AT Protocol',
    defaultWaypointId: 'leaflet',
  },
  devTools: {
    id: 'devTools',
    name: 'Developer Tools',
    description: 'Tools for developers and debugging',
    defaultWaypointId: 'pdsls',
  },
};

export const CATEGORY_ORDER = [
  'blueskyClients',
  'atmosphereApps',
  'devTools',
];

/**
 * Get waypoints grouped by category
 */
export function getCategorizedWaypoints(type: WaypointType): CategorizedWaypoints[] {
  const availableWaypoints = getWaypointsForType(type);
  const categorized: CategorizedWaypoints[] = [];

  for (const categoryId of CATEGORY_ORDER) {
    const category = WAYPOINT_CATEGORIES[categoryId];
    const waypoints = availableWaypoints.filter(w => w.category === categoryId);
    
    if (waypoints.length > 0) {
      categorized.push({ category, waypoints });
    }
  }

  return categorized;
}

/**
 * Recommended waypoints configuration
 * Define which waypoints to show as recommended for different content types
 */
type RecommendedConfig = {
  waypointIds: string[];
  label?: string;
};

const RECOMMENDED_WAYPOINTS: Record<string, RecommendedConfig> = {
  // Bluesky posts
  'app.bsky.feed.post': {
    waypointIds: ['bluesky', 'anisota', 'blacksky'],
    label: 'Recommended for Posts',
  },
  
  // Bluesky profiles (when no collection)
  'profile': {
    waypointIds: ['bluesky', 'anisota'],
    label: 'Recommended for Profiles',
  },
  
  // Bluesky lists
  'app.bsky.graph.list': {
    waypointIds: ['bluesky', 'anisota'],
    label: 'Recommended for Lists',
  },
  
  // Calendar events
  'community.lexicon.calendar.event': {
    waypointIds: ['smokesignal'],
    label: 'Recommended for Events',
  },
  
  // Tangled repos
  'sh.tangled.repo': {
    waypointIds: ['tangled'],
    label: 'Recommended for Repos',
  },
  
  // Generic records - use pdsls for raw data, then atp.tools, then Anisota Explorer for exploring
  'record': {
    waypointIds: ['pdsls', 'atptools', 'anisotaExplorer'],
    label: 'Recommended for Records',
  },
};

/**
 * Get recommended waypoints dynamically based on content type and collection
 */
export function getRecommendedWaypoints(
  type: WaypointType,
  collection?: string
): { waypoints: Waypoint[]; label: string } {
  let config: RecommendedConfig | undefined;

  // First check by specific collection
  if (collection && RECOMMENDED_WAYPOINTS[collection]) {
    config = RECOMMENDED_WAYPOINTS[collection];
  }
  // Then check by type
  else if (RECOMMENDED_WAYPOINTS[type]) {
    config = RECOMMENDED_WAYPOINTS[type];
  }
  // Default fallback
  else {
    config = {
      waypointIds: ['bluesky'],
      label: 'Recommended',
    };
  }

  const waypoints = config.waypointIds
    .map(id => WAYPOINT_DESTINATIONS[id])
    .filter(Boolean);

  return {
    waypoints,
    label: config.label || 'Recommended',
  };
}

/**
 * @deprecated Use getRecommendedWaypoints instead
 * Get featured waypoint dynamically based on content type and collection
 */
export function getFeaturedWaypoint(
  type: WaypointType,
  collection?: string
): Waypoint | null {
  const { waypoints } = getRecommendedWaypoints(type, collection);
  return waypoints[0] || null;
}

